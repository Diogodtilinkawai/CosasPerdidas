<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-title>Sitio para encontrar las cosas que pierdas dentro de la escuela</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true" class="ion-padding">

  <!-- Título -->
  <h1 style="text-align: center; font-size: 2.5rem; margin-bottom: 1.5rem;">
    <span class="text-transparent bg-clip-text bg-gradient-to-r to-emerald-600 from-sky-400">
      <b>Agrega un objeto perdido</b>
    </span>
  </h1>

  <!-- Drive -->
  <div style="text-align: center; margin-bottom: 2rem;">
    <a href="https://drive.google.com/drive/u/2/folders/1Gtps4YkGiEX6wcfmIVbssFd-nFf9z0pi" target="_blank"
      style="color: #0ea5e9; text-decoration: underline; font-weight: bold;">
      Drive de imágenes
    </a>
  </div>

  <!-- Formulario -->
  <ion-card style="margin-bottom: 2rem;">
    <ion-card-content>
      <form #registerForm="ngForm" (ngSubmit)="onSubmit()">
        <ion-item>
          <ion-label position="floating">Objeto</ion-label>
          <ion-input id="Nombre" name="Nombre" [(ngModel)]="PrendaInput" required #Nombre="ngModel"></ion-input>
        </ion-item>
        <ion-item>
          <ion-label position="floating">Color</ion-label>
          <ion-input id="Color" name="Color" [(ngModel)]="ColorInput" required #Color="ngModel"></ion-input>
        </ion-item>
        <ion-item>
          <ion-label position="floating">Talla</ion-label>
          <ion-input id="Talla" name="Talla" [(ngModel)]="TallaInput" required #Talla="ngModel"></ion-input>
        </ion-item>
        <ion-item>
          <ion-label position="floating">Nombre de quien lo encontró</ion-label>
          <ion-input id="Persona" name="Persona" [(ngModel)]="PersonaInput" required #Persona="ngModel"></ion-input>
        </ion-item>
        <ion-item>
          <ion-label position="floating">Link de la imagen</ion-label>
          <ion-input id="Imagen" name="Imagen" [(ngModel)]="ImagenInput" required #Imagen="ngModel"></ion-input>
        </ion-item>
        <div style="text-align: center; margin-top: 1rem;">
          <button type="submit"
            class="text-white bg-gradient-to-r from-cyan-400 via-cyan-500 to-cyan-600 hover:bg-gradient-to-br focus:ring-4 focus:outline-none focus:ring-cyan-300 dark:focus:ring-cyan-800 shadow-lg shadow-cyan-500/50 dark:shadow-lg dark:shadow-cyan-800/80 font-medium rounded-lg text-sm px-5 py-2.5 text-center me-2 mb-2"
            [disabled]="registerForm.invalid">
            Agregar objeto
          </button>
        </div>
      </form>
    </ion-card-content>
  </ion-card>

  <!-- Filtro -->
  <ion-card style="margin-bottom: 2rem;">
    <ion-card-content>
      <ion-item>
        <ion-label position="floating">Buscar por color</ion-label>
        <ion-input [(ngModel)]="searchColor"></ion-input>
      </ion-item>
      <ion-item>
        <ion-label position="floating">Buscar por talla</ion-label>
        <ion-input [(ngModel)]="searchTalla"></ion-input>
      </ion-item>
      <div style="text-align: center; margin-top: 1rem;">
        <button (click)="buscarPorFiltros()" type="button"
          class="text-white bg-blue-500 hover:bg-blue-600 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-4 py-2">
          Buscar
        </button>
      </div>
    </ion-card-content>
  </ion-card>

  <ion-card style="margin-bottom: 2rem;">
    <ion-card-content>
      <h2 style="text-align: center; margin-bottom: 1rem;"
        class="text-transparent bg-clip-text bg-gradient-to-r to-emerald-600 from-sky-400">
        Búsquedas filtradas
      </h2>
      <ion-grid>
        <ion-row style="text-align: center;">
          <ion-col><b>Prenda</b></ion-col>
          <ion-col><b>Talla</b></ion-col>
          <ion-col><b>Color</b></ion-col>
          <ion-col><b>Persona</b></ion-col>
        </ion-row>
        <ion-row *ngFor="let item of filteredTasks" style="text-align: center;">
          <ion-col>{{ item.Prenda }}</ion-col>
          <ion-col>{{ item.Color }}</ion-col>
          <ion-col>{{ item.Talla }}</ion-col>
          <ion-col>{{ item.Persona }}</ion-col>
        </ion-row>
      </ion-grid>
    </ion-card-content>
  </ion-card>

  <!-- Todos los objetos -->
  <ion-card style="margin-bottom: 2rem;">
    <ion-card-content>
      <h2 style="text-align: center; margin-bottom: 1rem;">Todos los objetos</h2>
      <ion-grid>
        <ion-row style="text-align: center;">
          <ion-col><b>Prenda</b></ion-col>
          <ion-col><b>Talla</b></ion-col>
          <ion-col><b>Color</b></ion-col>
          <ion-col><b>Persona</b></ion-col>
          <ion-col><b>Imagen</b></ion-col>
          <ion-col><b>Borrar</b></ion-col>
          <ion-col><b>Editar</b></ion-col>
        </ion-row>
        <ion-row *ngFor="let item of tasks$ | async; let indice = index" style="text-align: center;">
          <ion-col>{{ item.Prenda }}</ion-col>
          <ion-col>{{ item.Color }}</ion-col>
          <ion-col>{{ item.Talla }}</ion-col>
          <ion-col>{{ item.Persona }}</ion-col>
          <ion-col>
            <img *ngIf="item.Imagen" [src]="item.Imagen" alt="Imagen" style="max-width: 80px; max-height: 80px; border-radius: 8px;">
          </ion-col>
          <ion-col>
            <button (click)="borrar(item.id!)" class="text-red-600 underline">Eliminar</button>
          </ion-col>
          <ion-col>
            <button (click)="Editar(item.id!, item)" class="text-blue-600 underline">Editar</button>
          </ion-col>
        </ion-row>
      </ion-grid>
    </ion-card-content>
  </ion-card>

  <!-- Objetos eliminados -->
  <ion-card style="margin-bottom: 2rem;">
    <ion-card-content>
      <h2 style="text-align: center; margin-bottom: 1rem;">Eliminados</h2>
      <ion-grid>
        <ion-row style="text-align: center;">
          <ion-col><b>Prenda</b></ion-col>
          <ion-col><b>Talla</b></ion-col>
          <ion-col><b>Color</b></ion-col>
          <ion-col><b>Persona</b></ion-col>
          <ion-col><b>Imagen</b></ion-col>
        </ion-row>
        <ion-row *ngFor="let item of eliminatedTasks$ | async; let indice = index" style="text-align: center;">
          <ion-col>{{ item.Prenda }}</ion-col>
          <ion-col>{{ item.Color }}</ion-col>
          <ion-col>{{ item.Talla }}</ion-col>
          <ion-col>{{ item.Persona }}</ion-col>
          <ion-col>
            <img *ngIf="item.Imagen" [src]="item.Imagen" alt="Imagen" style="max-width: 80px; max-height: 80px; border-radius: 8px;">
          </ion-col>
        </ion-row>
      </ion-grid>
    </ion-card-content>
  </ion-card>

  <!-- cerrar sesión -->
  <div style="text-align: center; margin-top: 2rem;">
    <button (click)="onSignUp()" type="button"
      class="text-white bg-gradient-to-r from-cyan-400 via-cyan-500 to-cyan-600 hover:bg-gradient-to-br focus:ring-4 focus:outline-none focus:ring-cyan-300 dark:focus:ring-cyan-800 shadow-lg shadow-cyan-500/50 dark:shadow-lg dark:shadow-cyan-800/80 font-medium rounded-lg text-sm px-5 py-2.5 text-center me-2 mb-2">
      Cerrar sesión
    </button>
  </div>

</ion-content>